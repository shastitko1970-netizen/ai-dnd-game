# –ì–∞–π–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (Next.js 14)
- **App Router**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Å `/app` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π
- **React 18**: –õ–∞—Ç–µ—Å—Ç–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ React
- **Zustand**: –õ—é–±–∏—Ç–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Tailwind CSS**: –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Ç–∏–ª–∏
- **TypeScript**: –ü–æ–ª–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤

### –ë—ç–∫–µ–Ω–¥ (Fastify)
- **Fastify**: –í—ã—Å–æ–∫–æ–ø–æ—Ç–∏—Ü–∏–∞–ª—å–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä
- **TypeScript**: –ü–æ–ª–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤
- **Modular Services**: –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **JSON –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: MVP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞ MongoDB)
- **OpenAI API**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è GPT-4

## –ö–ª—é—á–µ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### RulesEngine
**–ú–µ—Å—Ç–æ**: `backend/src/services/RulesEngine.ts`

–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞:
- –ó–∞–≥—Ä—É–∂–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª D&D 5e
- –ú–µ—Ä–∂–∏–Ω–≥ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤, AC, HP
- —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∞—Ç–∞–∫ –∏ —Å—Ç—Ä–µ–ª —Å–ø–µ–ª–ª–æ–≤

### CustomContentManager
**–ú–µ—Å—Ç–æ**: `backend/src/services/CustomContentManager.ts`

–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞:
- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª/–±–∞–∑–µ
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

### GameManager
**–ú–µ—Å—Ç–æ**: `backend/src/services/GameManager.ts`

–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞:
- —Ä–∞—Å–ø–æ—Ä—è–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã —É–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π
- –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π –∏ –¥–∏–∞–ª–µ–∫—Ç–æ–º
- –∂—Ç–æ–±—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å
- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å —Å–µ—Ä–≤–∏—Å–æ–º AI

## –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü–æ—Ç–æ–∫

1. **–ù–∞–π—Ç–∏ –Ω–æ–≤—ã–µ —Ä–∞—Å—ã**
   - –ü–æ—Å–ª–∞–Ω–∏–µ POST –∫ /api/custom-races
   - –ù–µ—Ö–æ—Ç—è –≤ CustomContentManager
   - —Å–æ—Ö—Ä–∞–Ω–∏—è –≤ backend/src/data/custom-content.json

2. **–ì–µ–º–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
   - RulesEngine –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
   - CustomContentManager –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
   - –¥–≤–∏–≥—É–Ω –º–µ—Ä–¥–∂–µ—Å —Ç–µ–º–∏

3. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞**
   - –û—Ä–≥–∞–Ω–∏–∑–µ—Ü –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ
   - –¥–æ–±—ã–≤–∞–µ—Ç –±–æ–Ω—É—Å—ã –∏—Ç–æ–≥–æ
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥—Ä–∞–µ–º—ã–µ

## –ü—Ä–∏–º–µ—Ä—ã API

### –ü–æ–ª—É—á–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
```bash
GET /api/rules/core
```

### –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ä–∂–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
```bash
GET /api/rules/merged
```

### –°–æ–∑–¥–∞—Ç—å –æ–±—ã—á–Ω–æ–≥–æ –Ω–∞—è–¥—ã
```bash
curl -X POST http://localhost:3001/api/custom-races \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "Custom Race",
    "description": "...",
    ...
  }'
```

## –ü–æ–¥–µ–ª–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ì–∞–π–¥—ã –ø–æ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- **100% TypeScript**: –û—Ö–≤–∞—Ç –≤—Å–Ω–æ–≥–æ –∫–æ–¥–∞
- **–û–±—â–∏–µ —Ç–∏–ø—ã**: `backend/src/types/` –∏ `frontend/lib/types.ts`
- **–ü—Ä–∞—Ä–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–≤–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ù–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## –ö–æ—Å—Ç–ª—é–º —Ä–∞–±–æ—Ç—ã

- **ESM –º–æ–¥—É–ª–∏**: –ò—Å–ø–æ–ª—å–∑–∞–Ω–∏–µ `import` —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- **Async/await**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å—ë–º –∫–æ–¥–µ
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Try/catch –≤ –∞—Å–∏–Ω—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
- **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤**: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

## –ë–ª–∏–∂–∞–π—à–∏–µ —ç–Ω—Ö–∞–Ω—Å–º–µ–Ω—Ç—ã

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: –ü–µ—Ä–µ–Ω–∞—é—Ö–∞ —Å JSON –Ω–∞ MongoDB
2. **–ê–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏**: –î–æ–±–∞–≤–ª—è–π –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤—Ö–æ–¥–∞
3. **–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏**: –û–±–∞–≤–ª—è–π —Ä–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
4. **–ï—â—ë AI**: –ü—Ä–æ—Ä–≤–∞–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞—Ä—Ä–∞—Ç–∏–≤–∞
5. **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø–æ—Ä–∞**: –†–µ—Å–ø–æ–Ω—Å–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Jest/Vitest —é–Ω–∏—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

---

–ì–æ—Ä—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞! üöÄ
